<?php

/*
 * Implements hook_menu()
 */
function cse_selector_menu() {
  $items['admin/config/content/cse_selector'] = array(
    'title' => 'Google Custom Search',
    'description' => 'Google Custom Search',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('cse_selector_settings'),
    'file' => 'cse_selector.admin.inc',
    'access arguments' => array('administer'),
  );
  return $items;
}
/*
 * Implements hook_help for Custom Search
 */
function cse_selector_help($path, $arg) {
  switch ($path) {
    case 'admin/help#cse_selector':
      $output = '';
      $output .= '<h3>' . t('About') . '</h3>';
      $output .= '<p>' . t('This module implements Google\'s Custom Search engine to search either under a particular page or the entire site') . '</p>';
      $output .= '<dt>' . t('Information') . '<dt>';
      $output .= '<dd>' . t('This module consists of a search bar in the header, and a search page with a second search bar and a radio selection to define the \'as_sitesearch\' parameter to the specific subpage, and the search results. The default behavior will be to search on the subpage') . '</dd>';
      $output .= '<dt>' . t('Configuration') . '</dt>';
      $output .= '<dd>' . t('The Google Search API Key can be configured at admin/config/content/cse_selector_help') . '</dd>';
      break;
  }
}

/*
 * Implements hook_block_view, this will be displayed on every page, default behavior sends current subpage for as_sitesearch
 */
function cse_selector_block_view() {
  $block['search']['q'] = array(
    '#type' => 'textfield',
    '#default_value' => '',
  );
  $block['search']['search_submit']  = array(
    '#type' => 'submit',
    '#value' => t('Search'),
  );
  return $block;
}

/*
 * Implements search results
 */
 /*Function cse_selector_####($path) {
  $search_addr = http:\/\/local.test/cse; //Replace this with actual url in production
  $curr_addr = $address . explode('/', current_path())[0];
  $block['results'] = '<gcse:results-only as_sitesearch=\"' . $curr_addr . '\"></gcse:results-only>';
  return $block;
}

function cse_selector_display_form() {
  $form['search']['q'] = array(
    '#type' => 'textfield',
    '#default_value' => '',
  );
  $options = array(

  );
  $form['search']['search_location'] = array(

  );
  $form['search']['search_submit']  = array(
    '#type' => 'submit',
    '#value' => t('Search'),
  );
  return $form;
}

function cse_selector_###_validate($form) {

}*/
